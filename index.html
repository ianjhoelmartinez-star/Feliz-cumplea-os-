<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Galaxia ðŸ’–</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:black;
    touch-action:none;
}

canvas{
    position:absolute;
    top:0;
    left:0;
}

.mensaje{
    position:absolute;
    top:40%;
    width:100%;
    text-align:center;
    font-size:32px;
    color:white;
    font-family:Arial;
    text-shadow:0 0 20px white;
    cursor:pointer;
}

.corazon{
    position:absolute;
    color:white;
    font-size:20px;
    animation:flotar 2s linear forwards;
    pointer-events:none;
}

@keyframes flotar{
    0%{opacity:1; transform:translateY(0);}
    100%{opacity:0; transform:translateY(-120px);}
}
</style>
</head>
<body>

<audio autoplay loop>
    <source src="ojitos.mp3" type="audio/mpeg">
</audio>

<canvas id="galaxia"></canvas>

<div class="mensaje" onclick="crearCorazones(event)">
FELIZ CUMPLEAÃ‘OS MI BEBECHITA HEMOSHA ðŸ’–
</div>

<script>
const canvas = document.getElementById("galaxia");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let estrellas = [];
let fugaces = [];

let escala = 1;
let offsetX = 0;
let offsetY = 0;
let arrastrando = false;
let startX, startY;

for(let i=0;i<600;i++){
    estrellas.push({
        x:(Math.random()-0.5)*2000,
        y:(Math.random()-0.5)*2000,
        r:Math.random()*2
    });
}

function dibujar(){
    ctx.fillStyle="rgba(0,0,0,0.4)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.save();
    ctx.translate(canvas.width/2 + offsetX, canvas.height/2 + offsetY);
    ctx.scale(escala,escala);

    ctx.fillStyle="white";
    estrellas.forEach(e=>{
        ctx.beginPath();
        ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
        ctx.fill();
    });

    fugaces.forEach((f,i)=>{
        ctx.beginPath();
        ctx.moveTo(f.x,f.y);
        ctx.lineTo(f.x-80,f.y+80);
        ctx.strokeStyle="white";
        ctx.stroke();
        f.x+=10;
        f.y+=10;
        if(f.x>1000) fugaces.splice(i,1);
    });

    ctx.restore();

    requestAnimationFrame(dibujar);
}

setInterval(()=>{
    fugaces.push({
        x:(Math.random()-0.5)*2000,
        y:-1000
    });
},2000);

dibujar();

/* Zoom */
canvas.addEventListener("wheel", e=>{
    e.preventDefault();
    escala += e.deltaY * -0.001;
    escala = Math.min(Math.max(.3, escala), 5);
});

/* Movimiento */
canvas.addEventListener("mousedown", e=>{
    arrastrando = true;
    startX = e.clientX - offsetX;
    startY = e.clientY - offsetY;
});

canvas.addEventListener("mousemove", e=>{
    if(arrastrando){
        offsetX = e.clientX - startX;
        offsetY = e.clientY - startY;
    }
});

canvas.addEventListener("mouseup", ()=> arrastrando=false);

/* Celular */
canvas.addEventListener("touchstart", e=>{
    arrastrando = true;
    startX = e.touches[0].clientX - offsetX;
    startY = e.touches[0].clientY - offsetY;
});

canvas.addEventListener("touchmove", e=>{
    if(arrastrando){
        offsetX = e.touches[0].clientX - startX;
        offsetY = e.touches[0].clientY - startY;
    }
});

canvas.addEventListener("touchend", ()=> arrastrando=false);

/* Corazones */
function crearCorazones(e){
    for(let i=0;i<6;i++){
        let c = document.createElement("div");
        c.className="corazon";
        c.innerHTML="ðŸ¤";
        c.style.left=(e.clientX||e.touches?.[0]?.clientX)+"px";
        c.style.top=(e.clientY||e.touches?.[0]?.clientY)+"px";
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),2000);
    }
}
</script>

</body>
</html>
